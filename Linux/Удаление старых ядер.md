# Удаление старых ядер

После установки или обновления нового ядра Linux старые файлы не удаляются автоматически. Если раздел загрузки имеет ограниченное место на диске, это может стать проблемой. Конечно, можно не удалять эти файлы, если проблем с местом нет. Причинами для удаления могут быть: очистка места на диске или меню загрузки. Файлы ядра сохраняются для возможности загрузки системы в разных версиях ядра.

## Автоматическое удаление через apt
В современных системах (на базе Debian/Ubuntu) после установки нового ядра apt предлагает удалить старые ненужные файлы. Это можно сделать просто командой:

```
sudo apt autoremove
```

**Совет:** Эта команда безопасна и удалит только ненужные пакеты. Запускайте её регулярно после обновлений.

## Проверка актуальной версии ядра
Чтобы получить информацию о текущем ядре, используйте команду `uname`:

### Шаги:
1. Краткая версия (только версия ядра):
   ```
   uname -r
   ```

2. Расширенная версия (ядро, архитектура, ОС):
   ```
   uname -mrs
   ```

3. Полная информация о системе:
   ```
   uname -a
   ```

**Совет:** Эти команды помогут убедиться, какую версию ядра вы используете перед удалением старых.

## Получение списка установленных версий ядра
Все установленные версии можно просмотреть с помощью `dpkg --list` и фильтрации через `grep`.

### Шаги:
1. Список ядер (linux-image):
   ```
   dpkg --list | grep linux-image
   ```

2. Список заголовков (linux-headers):
   ```
   dpkg --list | grep linux-headers
   ```

**Совет:** Обратите внимание на статус пакетов (например, "ii" — установлен). Не удаляйте версию, которая соответствует выводу `uname -r`.

## Удаление старых версий
Будьте осторожны: не удаляйте актуальную версию ядра, иначе система может не загрузиться.

### Шаги:
1. Удалить конкретную версию (замените XXX на номер версии, например, linux-image-5.10.0-20-generic):
   ```
   sudo apt --purge remove linux-image-XXX
   ```

2. Или удалить по маске (например, все версии 4.2.0-2*):
   ```
   sudo apt --purge remove linux-image-4.2.0-2*
   ```

3. После удаления обновите GRUB (меню загрузки):
   ```
   sudo update-grub2
   ```

4. Перезагрузите систему для применения изменений:
   ```
   sudo systemctl reboot
   ```
   Или просто:
   ```
   sudo reboot
   ```

**Совет:** Перед перезагрузкой убедитесь, что текущая версия ядра (из `uname -r`) не удалена. Если сомневаетесь, создайте резервную копию или проконсультируйтесь с документацией. После перезагрузки проверьте загрузку системы.

Если возникнут проблемы, восстановите систему из резервной копии или загрузитесь в recovery mode. Для дополнительной информации используйте `man dpkg` или `man apt`.