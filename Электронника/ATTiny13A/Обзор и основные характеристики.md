# Обзор ATtiny13A: компактный микроконтроллер для простых проектов

ATtiny13A — это 8-разрядный AVR-микроконтроллер от Microchip, построенный на базе RISC-архитектуры с технологией picoPower®. Он идеально подходит для простых проектов, где требуется минимальный набор функций при низком энергопотреблении. В этой статье мы разберем характеристики, схему подключения и процесс прошивки ATtiny13A с помощью Arduino IDE.

## Основные характеристики ATtiny13A

ATtiny13A оснащен 1 КБ флеш-памяти для программ, 64 байтами EEPROM и 64 байтами SRAM. Устройство поддерживает до 20 MIPS на частоте 20 МГц при напряжении от 1,8 до 5,5 В. Это делает его отличным выбором для батарейных устройств или проектов с ограниченным бюджетом.

| Параметр                  | Значение                  |
|---------------------------|---------------------------|
| Тип памяти               | Flash                     |
| Размер памяти (для записи программ) | 1 KB                |
| Скорость CPU             | 20 MIPS/DMIPS (20 МГц)    |
| SRAM                     | 64 bytes                  |
| EEPROM                   | 64 bytes                  |
| ШИМ (PWM) контактов      | 2                         |
| Таймеры                  | 1 x 8-bit                 |
| Диапазон температур      | -40 - 125 °C              |
| Диапазон рабочего напряжения | 1.8 - 5.5 V          |
| Цифровых контактов       | 6                         |
| Аналоговых контактов     | 4                         |
| SPI                      | 1                         |
| I2C                      | -                         |
| UART                     | -                         |

MIPS (Millions of Instructions Per Second) — это миллион команд в секунду, что отражает производительность процессора.

## Схема микроконтроллера ATtiny13A

ATtiny13A имеет 8-выводной корпус SOIC или DIP. Основные выводы:
- PB0–PB5: цифровые/аналоговые порты.
- RESET: для сброса и программирования.
- VCC и GND: питание.

Для детальной схемы рекомендуется обратиться к datasheet Microchip.

## Прошивка ATtiny13A с помощью Arduino

ATtiny13A не имеет UART, поэтому прошивка осуществляется через SPI-интерфейс. Для этого используется Arduino как ISP-программатор.

### Схема подключения Arduino к ATtiny13A

| Arduino | ATtiny13A |
|---------|-----------|
| GND     | GND       |
| 3.3 V   | VCC       |
| 13      | PB2 (SCK) |
| 12      | PB1 (MISO)|
| 11      | PB0 (MOSI)|
| 10      | PB5 (RESET)|

Дополнительно подключите конденсатор 10 мкФ: длинный контакт к RESET ATtiny13A, короткий — к GND. Это предотвращает случайный сброс во время прошивки.

### Подготовка Arduino как ISP-программатора

1. Подключите Arduino (например, Pro Mini) к ПК.
2. Откройте Arduino IDE.
3. Загрузите скетч ArduinoISP: Файл → Примеры → 11.ArduinoISP → ArduinoISP.
4. Выберите плату: Инструменты → Плата → Arduino AVR Boards → Arduino Pro Mini.
5. Выберите порт: Инструменты → Порт.
6. Загрузите скетч: нажмите кнопку "Загрузка".
7. После загрузки Arduino готов к использованию как программатор.

### Установка загрузчика в ATtiny13A

1. Добавьте поддержку ATtiny13A в Arduino IDE:
   - Arduino → Preferences... → Дополнительные ссылки для менеджера плат → Вставьте: `https://mcudude.github.io/MicroCore/package_MCUdude_MicroCore_index.json`
   - Инструменты → Плата → Менеджер плат → Введите "MicroCore" → Установите.

2. Выберите плату: Инструменты → Плата → MicroCore → ATtiny13.

3. Настройте плату:
   - Инструменты → BOD → BOD 1.8V
   - Инструменты → EEPROM → EEPROM retained
   - Инструменты → Clock → 9.6 MHz internal osc.
   - Инструменты → Расчет времени → Micros disabled

4. Выберите программатор: Инструменты → Программатор → Arduino as ISP (MicroCore).

5. Запишите загрузчик: Инструменты → Записать загрузчик.

   После завершения в нижней части IDE появится сообщение "Запись загрузчика завершена".

### Загрузка скетча в ATtiny13A

1. Создайте новый скетч и вставьте следующий код (мигание светодиодом на PB3):

   ```cpp
   void setup() {
     pinMode(PB3, OUTPUT);
   }
   void loop() {
     digitalWrite(PB3, HIGH);
     delay(1000);
     digitalWrite(PB3, LOW);
     delay(1000);
   }
   ```

2. Выберите плату ATtiny13A (и настройте, если нужно).

3. Выберите программатор: Инструменты → Программатор → Arduino as ISP (MicroCore).

4. Загрузите скетч: Скетч → Загрузить через программатор.

Теперь ваш ATtiny13A готов к работе. Этот микроконтроллер отлично подходит для проектов вроде простых датчиков или LED-эффектов, где не требуется сложная периферия.

**Ссылки:**
- [Datasheet ATtiny13A на сайте Microchip](https://www.microchip.com/en-us/product/attiny13a)
- [MicroCore на GitHub](https://github.com/MCUdude/MicroCore)
